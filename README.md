# Gemini AI Plugin（Sealdice）

一个 **基于 Google Gemini 模型的 Sealdice AI 插件**，  
用于群聊 / 私聊中的角色扮演、环境插话与“拟人化”互动。

> 灵感来源：  
> - 智谱大模型 AI Plugin  
> - SillyTavern  
> - SpectreCore（影芯）  
>
> 本质上是被智谱模型的呆傻气晕之后的产物。  
> 编写过程中大量借助了 Google AI Studio 与 ChatGPT 辅助编码。

---
## 🧠 当前已实现功能

### 1️⃣ 接入 AI 模型，支持完整角色扮演
- 基于 **Gemini（OpenAI API 兼容反代）**
- 支持高度自定义 Prompt
- 分离 **角色背景 / 语气风格 / 额外指令**

---

### 2️⃣ 多触发方式 + 概率控制
- 支持：
  - `@bot`
  - 回复 bot
  - 关键词触发
- 关键词可配置 **不同触发概率**
- 未命中概率时仅作为环境噪音记录，不强行回复

---

### 3️⃣ 特殊用户配置（身份映射）
- 可配置最多 **6 组特殊用户**
- 为特定 QQ 赋予：
  - 不同的 `user_info`（身份）
  - 不同的显示名
- 用于骰主 / 熟人 / 重要角色等场景

---

### 4️⃣ 聊天评分 & 好感度系统
- AI 会对 **每一次用户输入进行隐式评分**
- 好感度范围：
  - 敌对 → 冷淡 → 中立 → 友善 → 信赖 → 挚爱
- 好感度影响：
  - 回复态度
  - 容忍度
  - 是否愿意继续互动
- 支持 **时间自然回归**（24 小时逐步回到中立值）

---

### 5️⃣ 压力系统与熔断机制
- AI 拥有内部 **Stress（压力）值**
- 连续负面 / 垃圾输入会：
  - 快速提升压力
  - 触发简短回复 / 冷处理 / 忽视
- 高压力下：
  - 自动缩短回复
  - 严重情况下直接不回复（但仍记录环境）
- 压力会随时间缓慢恢复，模拟“冷静期”

---

### 6️⃣ 时间感知
- AI 可感知当前现实时间
- 当前版本使用 **世界时间（本地系统时间）**
- 对涉及“现在 / 刚刚 / 今天”的对话有效

---

## ⚙️ 配置概览（核心）

插件提供大量可配置项，包括但不限于：

- API 代理地址
- API Key
- 模型名称（如 `gemini-2.5-flash`）
- 最大回复 Tokens
- 最大回复字符数（防抽风）
- 上下文记忆长度
- 群聊环境记忆条数
- 关键词与触发概率
- 特殊用户映射
- 是否打印 Debug 日志

所有配置均可在 Sealdice 插件配置界面中完成。

---

## ⚠️ 已知与注意事项

- 本插件高度依赖 **OpenAI API 兼容反代**，官方api可能由于服务器地址（防火墙）原因无法访问！
- 对反代不了解的可以自行搜索搭建或寻找公益站点
- 不保证对所有 Gemini 模型版本行为一致
- 高度定制逻辑，**不适合作为“即插即用通用 AI”**
- 更适合：
  - ≈20人小群
  - TRPG群（非正式游玩时）
  - 绝望的oc妈
  - 虽然搭了骰子但不满足于骰点那丁点台词的骰主

---

## 📜 License

MIT License

你可以：
- 自由使用
- 修改
- 二次开发

秉承着互联网开源精神——欢迎交流。
我也不知道我怎么走到做代码这一步的。

